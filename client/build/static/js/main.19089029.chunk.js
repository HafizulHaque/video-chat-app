(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{115:function(e,a){},117:function(e,a){},132:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(70),c=t.n(l),i=(t(91),t(26)),o=t(78),s=t(57),m=t.n(s),u=Object(n.createContext)(),d=Object(o.a)("http://localhost:5000"),p=function(e){var a=e.children,t=Object(n.useState)(null),l=Object(i.a)(t,2),c=l[0],o=l[1],s=Object(n.useState)(""),p=Object(i.a)(s,2),f=p[0],b=p[1],g=Object(n.useState)(""),E=Object(i.a)(g,2),v=E[0],x=E[1],j=Object(n.useState)(!1),O=Object(i.a)(j,2),C=O[0],w=O[1],h=Object(n.useState)(!1),y=Object(i.a)(h,2),N=y[0],k=y[1],I=Object(n.useState)(""),S=Object(i.a)(I,2),D=S[0],B=S[1],R=Object(n.useRef)(null),A=Object(n.useRef)(),V=Object(n.useRef)();Object(n.useEffect)(function(){navigator.mediaDevices.getUserMedia({audio:!0,video:!0}).then(function(e){o(e),setTimeout(function(){R.current.srcObject=e},2e3)}),d.on("me",function(e){return b(e)}),d.on("calluser",function(e){var a=e.from,t=e.name,n=e.signal;x({isReceivingCall:!0,from:a,name:t,signal:n})})},[]);return r.a.createElement(u.Provider,{value:{call:v,callAccepted:C,myVideo:R,userVideo:A,stream:c,name:D,setName:B,callEnded:N,me:f,callUser:function(e){var a=new m.a({initiator:!0,trickle:!1,stream:c});a.on("signal",function(a){d.emit("calluser",{userToCall:e,signalData:a,from:f,name:D})}),a.on("stream",function(e){A.current.srcObject=e}),d.on("callaccepted",function(e){w(!0),a.signal(e)}),V.current=a},leaveCall:function(){k(!0),V.current.destroy(),window.location.reload()},answerCall:function(){w(!0);var e=new m.a({initiator:!1,trickle:!1,stream:c});e.on("signal",function(e){d.emit("answercall",{signal:e,to:v.from})}),e.on("stream",function(e){A.current.srcObject=e}),e.signal(v.signal),V.current=e}}},a)},f=t(31),b=t(172),g=t(167),E=t(160),v=t(164),x=t(166),j=Object(E.a)(function(e){return{video:Object(f.a)({width:"550px"},e.breakpoints.down("xs"),{width:"300px"}),gridContainer:Object(f.a)({justifyContent:"center",alignItems:"center"},e.breakpoints.down("xs"),{flexDirection:"column"}),paper:{padding:"10px",border:"2px solid black",margin:"10px"}}}),O=function(){var e=j(),a=Object(n.useContext)(u),t=a.name,l=a.callAccepted,c=a.myVideo,i=a.userVideo,o=a.callEnded,s=a.stream,m=a.call;return r.a.createElement(v.a,{container:!0,className:e.gridContainer},s&&r.a.createElement(x.a,{className:e.paper},r.a.createElement(v.a,{item:!0,xs:12,md:6},r.a.createElement(g.a,{variant:"h5",gutterBottom:!0},t||"Name"),r.a.createElement("video",{playsInline:!0,muted:!0,ref:c,autoPlay:!0,className:e.video}))),l&&!o&&r.a.createElement(x.a,{className:e.paper},r.a.createElement(v.a,{item:!0,xs:12,md:6},r.a.createElement(g.a,{variant:"h5",gutterBottom:!0},m.name||"Guest"),r.a.createElement("video",{playsInline:!0,ref:i,autoPlay:!0,className:e.video}))))},C=t(175),w=function(){var e=Object(n.useContext)(u),a=e.answerCall,t=e.call,l=e.callAccepted;return r.a.createElement(r.a.Fragment,null,t.isReceivingCall&&!l&&r.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},r.a.createElement("h1",null,t.name," is calling..."),r.a.createElement(C.a,{variant:"contained",color:"primary",onClick:a},"Answer")))},h=t(168),y=t(173),N=t(77),k=t(169),I=t(170),S=t(171),D=Object(E.a)(function(e){return{root:{display:"flex",flexDirection:"column"},gridContainer:Object(f.a)({width:"100%"},e.breakpoints.down("xs"),{flexDirection:"column"}),container:Object(f.a)({width:"600px",margin:"35px 0",padding:0},e.breakpoints.down("xs"),{width:"80%"}),margin:{marginTop:20},padding:{padding:20},paper:{padding:"10px 20px",border:"2px solid black"}}}),B=function(e){var a=e.children,t=Object(n.useContext)(u),l=t.me,c=t.callAccepted,o=t.name,s=t.setName,m=t.callEnded,d=t.leaveCall,p=t.callUser,f=Object(n.useState)(""),b=Object(i.a)(f,2),E=b[0],j=b[1],O=D();return r.a.createElement(h.a,{className:O.container},r.a.createElement(x.a,{elevation:10,className:O.paper},r.a.createElement("form",{className:O.root,noValidate:!0,autoComplete:"off"},r.a.createElement(v.a,{container:!0,className:O.gridContainer},r.a.createElement(v.a,{item:!0,xs:12,md:6,className:O.padding},r.a.createElement(g.a,{gutterBottom:!0,variant:"h6"},"Account Info"),r.a.createElement(y.a,{label:"Name",value:o,onChange:function(e){return s(e.target.value)},fullWidth:!0}),r.a.createElement(N.CopyToClipboard,{text:l,className:O.margin},r.a.createElement(C.a,{variant:"contained",color:"primary",fullWidth:!0,startIcon:r.a.createElement(k.a,{fontSize:"large"})},"Copy Your ID"))),r.a.createElement(v.a,{item:!0,xs:12,md:6,className:O.padding},r.a.createElement(g.a,{gutterBottom:!0,variant:"h6"},"Make a Call"),r.a.createElement(y.a,{label:"ID to Call",value:E,onChange:function(e){return j(e.target.value)},fullWidth:!0}),c&&!m?r.a.createElement(C.a,{variant:"contained",color:"secondary",fullWidth:!0,startIcon:r.a.createElement(I.a,{fontSize:"large"}),className:O.margin,onClick:d},"Hang Up"):r.a.createElement(C.a,{variant:"contained",color:"primary",fullWidth:!0,startIcon:r.a.createElement(S.a,{fontSize:"large"}),className:O.margin,onClick:function(){return p(E)}},"Make a Call")))),a))},R=Object(E.a)(function(e){return{appBar:Object(f.a)({borderRadius:15,margin:"15px 100px",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:"600px",border:"2px solid black"},e.breakpoints.down("xs"),{width:"90%"}),wrapper:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"}}}),A=function(){var e=R();return r.a.createElement("div",{className:e.wrapper},r.a.createElement(b.a,{position:"static",color:"inherit",className:e.appBar},r.a.createElement(g.a,{variant:"h3",align:"center"},"Video Chat")),r.a.createElement(O,null),r.a.createElement(B,null,r.a.createElement(w,null)))};c.a.createRoot(document.getElementById("root")).render(r.a.createElement(p,null,r.a.createElement(A,null)))},84:function(e,a,t){e.exports=t(132)},91:function(e,a,t){}},[[84,2,1]]]);
//# sourceMappingURL=main.19089029.chunk.js.map